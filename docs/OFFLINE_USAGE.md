# ุฏููู ุงุณุชุฎุฏุงู ุงููุธุงู Offline/Online

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูุนูู ุงููุธุงู ููุนูู offline ู online ุชููุงุฆูุงู. ุงููุธุงู ูุนูู ุนูู:

1. **Firebase Offline Persistence**: ูุญูุธ ุงูุจูุงูุงุช ุชููุงุฆูุงู ูู IndexedDB
2. **Queue System**: ูุญูุธ ุงูุนูููุงุช ุงููุนููุฉ (add/update/delete) ุนูุฏ ุนุฏู ูุฌูุฏ ุฅูุชุฑูุช
3. **Auto Sync**: ูุฒุงูู ุงูุชุบููุฑุงุช ุชููุงุฆูุงู ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู
4. **PWA Support**: ุงูุชุทุจูู ูุนูู ูู Progressive Web App

## ููููุฉ ุงูุนูู

### Online (ูุน ุฅูุชุฑูุช):
- โ ุฌููุน ุงูุนูููุงุช ุชุนูู ูุจุงุดุฑุฉ ูุน Firestore
- โ ุงูุจูุงูุงุช ุชูุญูุธ ูู IndexedDB ุชููุงุฆูุงู ููุงุณุชุฎุฏุงู ูุงุญูุงู
- โ ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ ุจูู ุงูุฃุฌูุฒุฉ

### Offline (ุจุฏูู ุฅูุชุฑูุช):
- โ ุงููุฑุงุกุฉ: ุชุนูู ูู IndexedDB (ุงูุจูุงูุงุช ุงููุญููุธุฉ)
- โ ุงููุชุงุจุฉ: ุชูุญูุธ ูู Queue System ูุชูููุฐ ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู
- โ ุงูุชุทุจูู ูุนูู ุจุดูู ูุงูู ุจุฏูู ุฅูุชุฑูุช

## ุงูููููุงุช ุงููุถุงูุฉ

### 1. Firebase Offline Persistence
**ุงูููู**: `app/firebase.jsx`
- ูุญูุธ ุงูุจูุงูุงุช ุชููุงุฆูุงู ูู IndexedDB
- ูุนูู ุชููุงุฆูุงู ูุน ุฌููุน ุนูููุงุช ุงููุฑุงุกุฉ

### 2. Offline Queue System
**ุงูููู**: `utils/offlineQueue.js`
- ูุญูุธ ุงูุนูููุงุช ุงููุนููุฉ (add/update/delete)
- ูููุฐูุง ุชููุงุฆูุงู ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู

### 3. Firebase Offline Wrapper
**ุงูููู**: `utils/firebaseOffline.js`
- ุฏูุงู ุจุฏููุฉ ูู `addDoc`, `updateDoc`, `deleteDoc`
- ุชุชุญูู ูู ุงูุงุชุตุงู ุชููุงุฆูุงู ูุชุถูู ูููุงุฆูุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุฅูุชุฑูุช

### 4. useOfflineSync Hook
**ุงูููู**: `hooks/useOfflineSync.js`
- ููุชุดู ุญุงูุฉ ุงูุงุชุตุงู
- ูุฒุงูู ุงูุชุบููุฑุงุช ุชููุงุฆูุงู
- ูุนุฑุถ ุนุฏุฏ ุงูุนูููุงุช ุงููุนููุฉ

### 5. OnlineStatus Component
**ุงูููู**: `components/OnlineStatus.jsx`
- ูุนุฑุถ ุญุงูุฉ ุงูุงุชุตุงู ูู ุฃุนูู ุงูุตูุญุฉ
- ูุนุฑุถ ุนุฏุฏ ุงูุนูููุงุช ุงููุนููุฉ

## ุงูุงุณุชุฎุฏุงู (ุงุฎุชูุงุฑู)

ุฅุฐุง ุฃุฑุฏุช ุงุณุชุฎุฏุงู Queue System ุจุดูู ุตุฑูุญุ ููููู ุงุณุชุจุฏุงู:

```javascript
// ุจุฏูุงู ูู:
import { addDoc, collection } from "firebase/firestore";
await addDoc(collection(db, "collectionName"), data);

// ุงุณุชุฎุฏู:
import { offlineAdd } from "@/utils/firebaseOffline";
await offlineAdd("collectionName", data);
```

**ููุงุญุธุฉ**: Firebase Offline Persistence ูุนูู ุชููุงุฆูุงู ูุน ุงูููุฏ ุงูุญุงููุ ููู Queue System ูุถูู ุฃู ุนูููุงุช ุงููุชุงุจุฉ ุชูููุฐ ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู.

## ุงููุฒุงููุฉ ุงูุชููุงุฆูุฉ

- โ ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู
- โ ูู 30 ุซุงููุฉ (ุฅุฐุง ูุงู ููุงู ุนูููุงุช ูุนููุฉ)
- โ ุนูุฏ ุงูุนูุฏุฉ ููุชุจููุจ (visibility change)

## ูุคุดุฑุงุช ุงูุญุงูุฉ

- ๐ด **Offline**: ูุง ููุฌุฏ ุงุชุตุงู - ุงูุจูุงูุงุช ุชูุญูุธ ูุญููุงู
- ๐ **Syncing**: ุฌุงุฑู ุงููุฒุงููุฉ
- โณ **Pending**: ุนูููุงุช ูู ุงูุชุธุงุฑ ุงููุฒุงููุฉ
- โ **Online**: ูู ุดูุก ุทุจูุนู

## ููุงุญุธุงุช ูููุฉ

1. **ุญุฌู ุงูุจูุงูุงุช**: IndexedDB ูุญุฏูุฏ (ุนุงุฏุฉ 50% ูู ูุณุงุญุฉ ุงููุฑุต)
2. **ุงูุชุนุงุฑุถุงุช**: ุฅุฐุง ุนุฏู ุนุฏุฉ ุฃุฌูุฒุฉ ููุณ ุงูุจูุงูุงุช offlineุ ูุฏ ุชุญุฏุซ ุชุนุงุฑุถุงุช
3. **ุงูุฃุฏุงุก**: ุงููุฒุงููุฉ ูุฏ ุชุณุชุบุฑู ููุชุงู ุฅุฐุง ูุงูุช ุงูุชุบููุฑุงุช ูุซูุฑุฉ

## ุงูุงุฎุชุจุงุฑ

1. ุงูุชุญ ุงูุชุทุจูู ูู ุงููุชุตูุญ
2. ุงูุชุญ DevTools > Network > Offline
3. ุฌุฑุจ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุจูุงูุงุช
4. ุดุงูุฏ ุฃู ุงูุจูุงูุงุช ุชูุญูุธ ูุญููุงู
5. ุฃุนุฏ ุงูุงุชุตุงู
6. ุดุงูุฏ ุงููุฒุงููุฉ ุงูุชููุงุฆูุฉ

